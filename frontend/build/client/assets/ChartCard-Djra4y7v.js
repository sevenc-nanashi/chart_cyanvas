import{j as e,r as i}from"./context-vN2-4QuS.js";import{c as o}from"./clsx-B-dksMZM.js";import{g as u,r}from"./utils-lR0QA9I9.js";import{q as g,L as p}from"./components-NKq783Lw.js";import{L as j,C as w,M as N,d as f,E as b,H as v}from"./chunk-2-DY34j8pW.js";import{T as m}from"./chunk-4-CoigCJVH.js";const y=({src:a,alt:s,...t})=>a?e.jsx("img",{src:a,alt:s||"",...t}):e.jsx("div",{className:o("bg-white dark:bg-gray-700 flex justify-center items-center animate-pulse",t.className),style:{...t.style}}),F=i.forwardRef(function({data:s,spacer:t},x){const[l,c]=i.useState(0),h=g();if(i.useEffect(()=>{c(Math.random())},[]),t)return e.jsx("div",{className:"p-2 h-0 w-[480px]",ref:x});const n=e.jsxs("div",{className:o("p-2 h-40 md:h-48 w-[480px] max-w-[calc(100vw_-_2rem)] shadow-sm rounded-xl flex relative","dark:shadow-slate-700/25",(s==null?void 0:s.visibility)==="public"?"bg-slate-100 dark:bg-slate-900":"bg-slate-200 dark:bg-gray-900",s&&"transition-shadow duration-200 hover:shadow-theme/50"),ref:x,children:[e.jsx(y,{src:s==null?void 0:s.cover,alt:s==null?void 0:s.title,className:"rounded-xl square w-36 md:w-44",width:176,height:176}),s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:o("absolute text-xs top-2 left-2 p-1 px-2 rounded-br-xl rounded-tl-[10px] font-bold text-white",u(s.rating)),children:["Lv. ",s.rating]}),s.visibility==="private"&&e.jsx("div",{className:"absolute text-xs top-2 right-2 p-1 px-2 rounded-br-xl rounded-tl-[10px] font-bold text-white",children:e.jsx(j,{className:"h-6 w-6 text-slate-900 dark:text-white"})}),s.visibility==="scheduled"&&e.jsx("div",{className:"absolute text-xs top-2 right-2 p-1 px-2 rounded-br-xl rounded-tl-[10px] font-bold text-white",children:e.jsx(w,{className:"h-6 w-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{className:"ml-2 flex flex-col flex-grow",children:[e.jsx("h2",{className:"font-bold text-2xl w-full break-all overflow-hidden",children:s.title}),e.jsx("div",{className:"flex-grow"}),e.jsxs("p",{className:"text-xs",children:[e.jsx(N,{className:"mr-1 w-4 h-4"}),s.composer]}),e.jsxs("p",{className:"text-xs",children:[e.jsx(f,{className:"mr-1 w-4 h-4"}),s.artist||"-"]}),e.jsx("p",{className:"text-xs",children:s.tags.length>0?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"mr-1 w-4 h-4"}),s.tags.join("、")]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"mr-1 w-4 h-4 text-slate-400 dark:text-slate-500"}),"-"]})}),e.jsx(p,{to:`/users/${s.author.handle}`,onClick:d=>d.stopPropagation(),children:e.jsxs("p",{className:"text-xs hover:text-blue-400 transition-colors duration-200",children:[e.jsx(b,{className:"mr-1 w-4 h-4"}),s.authorName||s.author.name,e.jsxs("span",{className:"text-xs",children:["#",s.author.handle]})]})}),e.jsxs("p",{className:"text-xs text-red-400",children:[e.jsx(v,{className:"mr-1 w-4 h-4"}),s.likes]})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"ml-2 flex flex-col",children:[e.jsx("h2",{className:"h-8 bg-gray-300 rounded animate-pulse mt-4",style:{width:`${50+l*50}%`}}),e.jsx("div",{className:"flex-grow"}),e.jsx("p",{className:"h-4 bg-gray-300 rounded animate-pulse mt-2 opacity-75",style:{width:`${50+r(l)*50}%`}}),e.jsx("p",{className:"h-4 bg-gray-300 rounded animate-pulse mt-2 opacity-75",style:{width:`${50+r(l)*50}%`}}),e.jsx("p",{className:"h-4 bg-gray-300 rounded animate-pulse mt-2 opacity-75",style:{width:`${50+r(l)*50}%`}}),e.jsx("p",{className:"h-4 bg-red-300 rounded animate-pulse mt-2 opacity-75",style:{width:`${50+r(l)*50}%`}})]})})]});return s?e.jsx("div",{className:"text-normal cursor-pointer",onClick:()=>h(`/charts/${s.name}`),children:n}):n});export{F as C,y as O};

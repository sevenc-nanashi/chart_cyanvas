import{r,j as e}from"./context-vN2-4QuS.js";import{p as d}from"./chunk-2-DY34j8pW.js";import{u as f}from"./useTranslation-CesOUbzQ.js";import{C as c}from"./ChartCard-Djra4y7v.js";import{w as g,L as x}from"./components-NKq783Lw.js";import{T as j}from"./Trans-COWa_CB2.js";import"./clsx-B-dksMZM.js";import"./utils-lR0QA9I9.js";import"./chunk-4-CoigCJVH.js";function w(t){let{i18n:o}=f();r.useEffect(()=>{o.language!==t&&o.changeLanguage(t)},[t,o])}const _={i18n:"home"},b=({data:t})=>[{title:t.title}],A=()=>{const{locale:t}=g();w(t);const{t:o,i18n:m}=f("home"),[a,u]=r.useState([]),h=r.useRef(null),i=r.useRef(!1),l=r.useCallback(()=>{i.current||(i.current=!0,fetch(d("/api/charts",{offset:a.length,count:20})).then(async s=>{const n=await s.json();n.code==="ok"&&u(p=>[...p,...n.charts])}).finally(()=>{setTimeout(()=>{i.current=!1},0)}))},[a]);return r.useEffect(()=>{a.length||l()},[a,l]),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{children:e.jsx(j,{i18nKey:"home:welcome",components:[e.jsx(x,{to:`https://cc-wiki.sevenc7c.com/${m.language}/welcome`,target:"_blank"},"1")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:o("newCharts")}),e.jsxs("div",{className:"flex flex-wrap mt-2 gap-4 justify-center",ref:h,children:[a.length>0?a.map(s=>e.jsx(c,{data:s},s.name)):new Array(20).fill(void 0).map((s,n)=>e.jsx(c,{data:void 0},n)),new Array(20).fill(void 0).map((s,n)=>e.jsx(c,{spacer:!0},n))]})]})]})};export{A as default,_ as handle,b as meta};

import{g as X,d as Y,r as E,e as z,I as Z}from"./context-vN2-4QuS.js";import{w as q,i as H,a as L,b as F}from"./useTranslation-CesOUbzQ.js";var G={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const Q=X(G);var _=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function P(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(Q[t[1]]||e.charAt(e.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var a=e.indexOf("-->");return{type:"comment",comment:a!==-1?e.slice(4,a):""}}for(var h=new RegExp(_),s=null;(s=h.exec(e))!==null;)if(s[0].trim())if(s[1]){var o=s[1].trim(),m=[o,""];o.indexOf("=")>-1&&(m=o.split("=")),n.attrs[m[0]]=m[1],h.lastIndex--}else s[2]&&(n.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return n}var U=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,R=/^\s*$/,ee=Object.create(null);function M(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(t){var a=[];for(var h in t)a.push(h+'="'+t[h]+'"');return a.length?" "+a.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(M,"")+"</"+n.name+">";case"comment":return e+"<!--"+n.comment+"-->"}}var te={parse:function(e,n){n||(n={}),n.components||(n.components=ee);var t,a=[],h=[],s=-1,o=!1;if(e.indexOf("<")!==0){var m=e.indexOf("<");a.push({type:"text",content:m===-1?e:e.substring(0,m)})}return e.replace(U,function(c,v){if(o){if(c!=="</"+t.name+">")return;o=!1}var d,g=c.charAt(1)!=="/",A=c.startsWith("<!--"),$=v+c.length,f=e.charAt($);if(A){var T=P(c);return s<0?(a.push(T),a):((d=h[s]).children.push(T),a)}if(g&&(s++,(t=P(c)).type==="tag"&&n.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!f||f==="<"||t.children.push({type:"text",content:e.slice($,e.indexOf("<",$))}),s===0&&a.push(t),(d=h[s-1])&&d.children.push(t),h[s]=t),(!g||t.voidElement)&&(s>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(s--,t=s===-1?a:h[s]),!o&&f!=="<"&&f)){d=s===-1?a:h[s].children;var i=e.indexOf("<",$),u=e.slice($,i===-1?void 0:i);R.test(u)&&(u=" "),(i>-1&&s+d.length>=0||u!==" ")&&d.push({type:"text",content:u})}}),a},stringify:function(e){return e.reduce(function(n,t){return n+M("",t)},"")}};const W=(e,n)=>{var a;if(!e)return!1;const t=((a=e.props)==null?void 0:a.children)??e.children;return n?t.length>0:!!t},K=e=>{var t,a;if(!e)return[];const n=((t=e.props)==null?void 0:t.children)??e.children;return(a=e.props)!=null&&a.i18nIsDynamicList?I(n):n},ne=e=>Array.isArray(e)&&e.every(E.isValidElement),I=e=>Array.isArray(e)?e:[e],se=(e,n)=>{const t={...n};return t.props=Object.assign(e.props,n.props),t},J=(e,n)=>{if(!e)return"";let t="";const a=I(e),h=n!=null&&n.transSupportBasicHtmlNodes?n.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((s,o)=>{if(H(s))t+=`${s}`;else if(E.isValidElement(s)){const{props:m,type:c}=s,v=Object.keys(m).length,d=h.indexOf(c)>-1,g=m.children;if(!g&&d&&!v)t+=`<${c}/>`;else if(!g&&(!d||v)||m.i18nIsDynamicList)t+=`<${o}></${o}>`;else if(d&&v===1&&H(g))t+=`<${c}>${g}</${c}>`;else{const A=J(g,n);t+=`<${o}>${A}</${o}>`}}else if(s===null)L("Trans: the passed in value is invalid - seems you passed in a null child.");else if(F(s)){const{format:m,...c}=s,v=Object.keys(c);if(v.length===1){const d=m?`${v[0]}, ${m}`:v[0];t+=`{{${d}}}`}else L("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else L("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),t},re=(e,n,t,a,h,s)=>{if(n==="")return[];const o=a.transKeepBasicHtmlNodesFor||[],m=n&&new RegExp(o.map(i=>`<${i}`).join("|")).test(n);if(!e&&!m&&!s)return[n];const c={},v=i=>{I(i).forEach(l=>{H(l)||(W(l)?v(K(l)):F(l)&&!E.isValidElement(l)&&Object.assign(c,l))})};v(e);const d=te.parse(`<0>${n}</0>`),g={...c,...h},A=(i,u,l)=>{var p;const x=K(i),j=f(x,u.children,l);return ne(x)&&j.length===0||(p=i.props)!=null&&p.i18nIsDynamicList?x:j},$=(i,u,l,x,j)=>{i.dummy?(i.children=u,l.push(E.cloneElement(i,{key:x},j?void 0:u))):l.push(...E.Children.map([i],p=>{const r={...p.props};return delete r.i18nIsDynamicList,E.createElement(p.type,{...r,key:x,ref:p.ref},j?null:u)}))},f=(i,u,l)=>{const x=I(i);return I(u).reduce((p,r,C)=>{var D,S;const w=((S=(D=r.children)==null?void 0:D[0])==null?void 0:S.content)&&t.services.interpolator.interpolate(r.children[0].content,g,t.language);if(r.type==="tag"){let k=x[parseInt(r.name,10)];l.length===1&&!k&&(k=l[0][r.name]),k||(k={});const y=Object.keys(r.attrs).length!==0?se({props:r.attrs},k):k,O=E.isValidElement(y),B=O&&W(r,!0)&&!r.voidElement,N=m&&F(y)&&y.dummy&&!O,V=F(e)&&Object.hasOwnProperty.call(e,r.name);if(H(y)){const b=t.services.interpolator.interpolate(y,g,t.language);p.push(b)}else if(W(y)||B){const b=A(y,r,l);$(y,b,p,C)}else if(N){const b=f(x,r.children,l);$(y,b,p,C)}else if(Number.isNaN(parseFloat(r.name)))if(V){const b=A(y,r,l);$(y,b,p,C,r.voidElement)}else if(a.transSupportBasicHtmlNodes&&o.indexOf(r.name)>-1)if(r.voidElement)p.push(E.createElement(r.name,{key:`${r.name}-${C}`}));else{const b=f(x,r.children,l);p.push(E.createElement(r.name,{key:`${r.name}-${C}`},b))}else if(r.voidElement)p.push(`<${r.name} />`);else{const b=f(x,r.children,l);p.push(`<${r.name}>${b}</${r.name}>`)}else if(F(y)&&!O){const b=r.children[0]?w:null;b&&p.push(b)}else $(y,w,p,C,r.children.length!==1||!w)}else if(r.type==="text"){const k=a.transWrapTextNodes,y=s?a.unescape(t.services.interpolator.interpolate(r.content,g,t.language)):t.services.interpolator.interpolate(r.content,g,t.language);k?p.push(E.createElement(k,{key:`${r.name}-${C}`},y)):p.push(y)}return p},[])},T=f([{dummy:!0,children:e||[]}],d,I(e||[]));return K(T[0])};function ae({children:e,count:n,parent:t,i18nKey:a,context:h,tOptions:s={},values:o,defaults:m,components:c,ns:v,i18n:d,t:g,shouldUnescape:A,...$}){var k,y,O,B;const f=d||z();if(!f)return q("You will need to pass in an i18next instance by using i18nextReactModule"),e;const T=g||f.t.bind(f)||(N=>N),i={...Y(),...(k=f.options)==null?void 0:k.react};let u=v||T.ns||((y=f.options)==null?void 0:y.defaultNS);u=H(u)?[u]:u||["translation"];const l=J(e,i),x=m||l||i.transEmptyNodeValue||a,{hashTransKey:j}=i,p=a||(j?j(l||x):l||x);(B=(O=f.options)==null?void 0:O.interpolation)!=null&&B.defaultVariables&&(o=o&&Object.keys(o).length>0?{...o,...f.options.interpolation.defaultVariables}:{...f.options.interpolation.defaultVariables});const r=o||n!==void 0||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},C={...s,context:h||s.context,count:n,...o,...r,defaultValue:x,ns:u},w=p?T(p,C):x;c&&Object.keys(c).forEach(N=>{const V=c[N];if(typeof V.type=="function"||!V.props||!V.props.children||w.indexOf(`${N}/>`)<0&&w.indexOf(`${N} />`)<0)return;function b(){return E.createElement(E.Fragment,null,V)}c[N]=E.createElement(b)});const D=re(c||e,w,f,i,C,A),S=t??i.defaultTransParent;return S?E.createElement(S,$,D):D}function le({children:e,count:n,parent:t,i18nKey:a,context:h,tOptions:s={},values:o,defaults:m,components:c,ns:v,i18n:d,t:g,shouldUnescape:A,...$}){var l;const{i18n:f,defaultNS:T}=E.useContext(Z)||{},i=d||f||z(),u=g||(i==null?void 0:i.t.bind(i));return ae({children:e,count:n,parent:t,i18nKey:a,context:h,tOptions:s,values:o,defaults:m,components:c,ns:v||(u==null?void 0:u.ns)||T||((l=i==null?void 0:i.options)==null?void 0:l.defaultNS),i18n:i,t:g,shouldUnescape:A,...$})}export{le as T};
